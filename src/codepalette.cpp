#include "codepalette.h"

#include <QDebug>

CodePalette::CodePalette(std::initializer_list<QPair<Role,
                                                     QTextCharFormat> > formats)
{
    for (const auto& pair : formats) {
        if (!m_formats.contains(pair.first)) {
            m_formats.insert(pair.first, pair.second);
        } else {
            qWarning() << "Duplicate role ignored:" << pair.first;
        }
    }
}

using CP = CodePalette;
const CodePalette defaultCodePalette{
    { CP::CmdLiteral, CharFormatBuilder().fg("#0000AA")->bold(true)->ok() },
    { CP::Bool_True, CharFormatBuilder().fg(QColor(0, 190, 0))
      ->weight(QFont::DemiBold)->ok() },
    { CP::Bool_False, CharFormatBuilder().fg(QColor(190, 0, 0))
      ->weight(QFont::DemiBold)->ok() },
    { CP::Double, CharFormatBuilder().fg("#2F97C1")->ok() },
    { CP::Float, CharFormatBuilder().fg("#2F97C1")->ok() },
    { CP::Integer, CharFormatBuilder().fg("#2F97C1")->ok() },
    { CP::Long, CharFormatBuilder().fg("#2F97C1")->ok() },
    { CP::String, CharFormatBuilder().fg("#A31621")->ok() },
    { CP::Angle, CharFormatBuilder().fg("#7404cf")->ok() },
    { CP::BlockPos, CharFormatBuilder().fg("#8c54ba")->ok() },
    { CP::Vec3, CharFormatBuilder().fg("#8c54ba")->ok() },
    { CP::ColumnPos, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::Rotation, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::Vec2, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::BlockState, CharFormatBuilder().fg("#7d7b55")->ok() },
    { CP::BlockPredicate,
      CharFormatBuilder().fg("#7d7b55")->italic(true)->ok() },
    { CP::ItemStack, CharFormatBuilder().fg("#7d8b5a")->ok() },
    { CP::ItemPredicate,
      CharFormatBuilder().fg("#7d8b5a")->italic(true)->ok() },
    { CP::Component, CharFormatBuilder().bg("#aaffe8f2")->ok() },
    { CP::Style, CharFormatBuilder().bg("#aaffe8f2")->ok() },
    { CP::FloatRange, CharFormatBuilder().fg("#1e9cb0")->ok() },
    { CP::IntRange, CharFormatBuilder().fg("#1e9cb0")->ok() },
    { CP::NbtTag, CharFormatBuilder().fg("#226467")->ok() },
    { CP::NbtByteArray, CharFormatBuilder().bg("#aaf1edfa")->ok() },
    { CP::NbtCompound, CharFormatBuilder().bg("#aae8e9ff")->ok() },
    { CP::NbtList, CharFormatBuilder().bg("#aaf1edfa")->ok() },
    { CP::NbtIntArray, CharFormatBuilder().bg("#aaf1edfa")->ok() },
    { CP::ResourceLocation, CharFormatBuilder().fg("#45503B")->ok() },
    { CP::Resource, CharFormatBuilder().fg("#45503B")->ok() },
    { CP::ResourceOrTag,
      CharFormatBuilder().fg("#45503B")->italic(true)->ok() },
    { CP::ResourceKey, CharFormatBuilder().fg("#72912d")->ok() },
    { CP::ResourceOrTagKey,
      CharFormatBuilder().fg("#72912d")->italic(true)->ok() },
    { CP::Dimension, CharFormatBuilder().fg("#40677d")->ok() },
    { CP::EntitySummon, CharFormatBuilder().fg("#238500")->ok() },
    { CP::Function, CharFormatBuilder().fg("#13acba")->italic(true)->ok() },
    { CP::ItemEnchantment, CharFormatBuilder().fg("#7a077a")->ok() },
    { CP::MobEffect, CharFormatBuilder().fg("#7a6f82")->ok() },
    { CP::Color, CharFormatBuilder().fg("#565756")->ok() },
    { CP::EntityAnchor, CharFormatBuilder().fg("#8ca177")->ok() },
    { CP::Heightmap, CharFormatBuilder().fg("#6B6B6B")->ok() },
    { CP::ItemSlot, CharFormatBuilder().fg("#779fa1")->ok() },
    { CP::Objective, CharFormatBuilder().fg("#d41e7f")->italic(true)->ok() },
    { CP::ObjectiveCriteria, CharFormatBuilder().fg("#7a4c65")->ok() },
    { CP::Operation, CharFormatBuilder().fg("#13e853")->ok() },
    { CP::Particle, CharFormatBuilder().fg("#49B13B")->ok() },
    { CP::ScoreboardSlot, CharFormatBuilder().fg("#7d364b")->ok() },
    { CP::Team, CharFormatBuilder().fg("#826c4f")->ok() },
    { CP::TemplateMirror, CharFormatBuilder().fg("#666930")->ok() },
    { CP::TemplateRotation, CharFormatBuilder().fg("#647116")->ok() },
    { CP::Swizzle, CharFormatBuilder().fg("#de59ce")->ok() },
    { CP::Time, CharFormatBuilder().fg("#5C37A5")->ok() },
    { CP::Uuid, CharFormatBuilder().fg("#9c442f")->ok() },
    { CP::Comment, CharFormatBuilder().fg(QColor(62, 195, 0))->ok() },
    { CP::Number, CharFormatBuilder().fg("#2F97C1")->ok() },
    { CP::Directive, CharFormatBuilder().fg("#985541")->bold(true)->ok() },
    { CP::Script, CharFormatBuilder().bg("#aaEBEBEB")->ok() },
    { CP::QuotedString, CharFormatBuilder().fg("#A31621")->ok() },
    { CP::CommandLiteral, CharFormatBuilder().fg(Qt::blue)->bold(true)->ok() },
    { CP::BlockState_States, CharFormatBuilder().bg("#aafaf0f5")->ok() },
    { CP::NbtPath_Step, CharFormatBuilder().bg("#aafff4e8")->ok() },
    { CP::TargetSelector_Variable, CharFormatBuilder().fg("#1e9c11")->weight(
          QFont::DemiBold)->ok() },
    { CP::TargetSelector_Arguments, CharFormatBuilder().bg("#aafaf0f5")->ok() },
    { CP::Key, CharFormatBuilder().fg("#B89C3D")->ok() },
    { CP::Gamemode, CharFormatBuilder().fg("#152769")->bold(true)->ok() },
    { CP::RegexPattern, CharFormatBuilder().fg("#444444")->ok() },
    { CP::GreedyString, CharFormatBuilder().fg("#A31621")->ok() },
};

const CodePalette defaultDarkCodePalette{
    { CP::CmdLiteral, CharFormatBuilder().fg("#9595FF")->bold(true)->ok() },
    { CP::Bool_True, CharFormatBuilder().fg(QColor(0, 190, 0))
      ->weight(QFont::DemiBold)->ok() },
    { CP::Bool_False, CharFormatBuilder().fg(QColor(190, 0, 0))
      ->weight(QFont::DemiBold)->ok() },
    { CP::Double, CharFormatBuilder().fg("#A2D4E8")->ok() },
    { CP::Float, CharFormatBuilder().fg("#A2D4E8")->ok() },
    { CP::Integer, CharFormatBuilder().fg("#A2D4E8")->ok() },
    { CP::Long, CharFormatBuilder().fg("#A2D4E8")->ok() },
    { CP::String, CharFormatBuilder().fg("#B72E3A")->ok() },
    { CP::Angle, CharFormatBuilder().fg("#7404cf")->ok() },
    { CP::BlockPos, CharFormatBuilder().fg("#8c54ba")->ok() },
    { CP::Vec3, CharFormatBuilder().fg("#8c54ba")->ok() },
    { CP::ColumnPos, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::Rotation, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::Vec2, CharFormatBuilder().fg("#8934cf")->ok() },
    { CP::BlockState, CharFormatBuilder().fg("#7d7b55")->ok() },
    { CP::BlockPredicate,
      CharFormatBuilder().fg("#7d7b55")->italic(true)->ok() },
    { CP::ItemStack, CharFormatBuilder().fg("#7d8b5a")->ok() },
    { CP::ItemPredicate,
      CharFormatBuilder().fg("#7d8b5a")->italic(true)->ok() },
    { CP::Component, CharFormatBuilder().bg("#aa45001E")->ok() },
    { CP::Style, CharFormatBuilder().bg("#aa45001E")->ok() },
    { CP::FloatRange, CharFormatBuilder().fg("#1e9cb0")->ok() },
    { CP::IntRange, CharFormatBuilder().fg("#1e9cb0")->ok() },
    { CP::NbtTag, CharFormatBuilder().fg("#3DB1B7")->ok() },
    { CP::NbtByteArray, CharFormatBuilder().bg("#aa281651")->ok() },
    { CP::NbtCompound, CharFormatBuilder().bg("#aa000568")->ok() },
    { CP::NbtList, CharFormatBuilder().bg("#aa281651")->ok() },
    { CP::NbtIntArray, CharFormatBuilder().bg("#aa281651")->ok() },
    { CP::ResourceLocation, CharFormatBuilder().fg("#94A585")->ok() },
    { CP::Resource, CharFormatBuilder().fg("#94A585")->ok() },
    { CP::ResourceOrTag,
      CharFormatBuilder().fg("#94A585")->italic(true)->ok() },
    { CP::ResourceKey, CharFormatBuilder().fg("#8CB337")->ok() },
    { CP::ResourceOrTagKey,
      CharFormatBuilder().fg("#8CB337")->italic(true)->ok() },
    { CP::Dimension, CharFormatBuilder().fg("#588CA9")->ok() },
    { CP::EntitySummon, CharFormatBuilder().fg("#238500")->ok() },
    { CP::Function, CharFormatBuilder().fg("#13acba")->italic(true)->ok() },
    { CP::ItemEnchantment, CharFormatBuilder().fg("#7a077a")->ok() },
    { CP::MobEffect, CharFormatBuilder().fg("#7a6f82")->ok() },
    { CP::Color, CharFormatBuilder().fg("#565756")->ok() },
    { CP::EntityAnchor, CharFormatBuilder().fg("#8ca177")->ok() },
    { CP::Heightmap, CharFormatBuilder().fg("#969696")->ok() },
    { CP::ItemSlot, CharFormatBuilder().fg("#779fa1")->ok() },
    { CP::Objective, CharFormatBuilder().fg("#d41e7f")->italic(true)->ok() },
    { CP::ObjectiveCriteria, CharFormatBuilder().fg("#7a4c65")->ok() },
    { CP::Operation, CharFormatBuilder().fg("#13e853")->ok() },
    { CP::Particle, CharFormatBuilder().fg("#49B13B")->ok() },
    { CP::ScoreboardSlot, CharFormatBuilder().fg("#7d364b")->ok() },
    { CP::Team, CharFormatBuilder().fg("#826c4f")->ok() },
    { CP::TemplateMirror, CharFormatBuilder().fg("#E5E7CB")->ok() },
    { CP::TemplateRotation, CharFormatBuilder().fg("#B1C928")->ok() },
    { CP::Swizzle, CharFormatBuilder().fg("#de59ce")->ok() },
    { CP::Time, CharFormatBuilder().fg("#5C37A5")->ok() },
    { CP::Uuid, CharFormatBuilder().fg("#9c442f")->ok() },
    { CP::Comment, CharFormatBuilder().fg("#577D45")->ok() },
    { CP::Number, CharFormatBuilder().fg("#A2D4E8")->ok() },
    { CP::Directive, CharFormatBuilder().fg("#DC785A")->bold(true)->ok() },
    { CP::Script, CharFormatBuilder().bg("#aa494949")->ok() },
    { CP::QuotedString, CharFormatBuilder().fg("#b84f58")->ok() },
    { CP::CommandLiteral,
      CharFormatBuilder().fg(59, 120, 255)->bold(true)->ok() },
    { CP::BlockState_States, CharFormatBuilder().bg("#aa341123")->ok() },
    { CP::NbtPath_Step, CharFormatBuilder().bg("#aa452400")->ok() },
    { CP::TargetSelector_Variable, CharFormatBuilder().fg("#28C716")->weight(
          QFont::DemiBold)->ok() },
    { CP::TargetSelector_Arguments, CharFormatBuilder().bg("#aa341123")->ok() },
    { CP::Key, CharFormatBuilder().fg("#B89C3D")->ok() },
    { CP::Gamemode, CharFormatBuilder().fg("#BBC6F1")->bold(true)->ok() },
    { CP::RegexPattern, CharFormatBuilder().fg("#b4b4b4")->ok() },
    { CP::GreedyString, CharFormatBuilder().fg("#B72E3A")->ok() },
};
